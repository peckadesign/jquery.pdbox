/*! jQuery pdBox 1.3.12 | MIT | PeckaDesign, s.r.o, https://github.com/peckadesign/jquery.pdbox */

$.pdBox=function(){var n={width:900,className:"",imageThumbnails:!1,imageThumbnailsAlign:{behavior:"smooth",block:"nearest",inline:"center"},infinitePager:!1,lang:$("html").attr("lang")||"cs"},s={cs:{close:"Zavřít",prev:"Předchozí",next:"Další",of:"/"},sk:{close:"Zavrieť",prev:"Predchádzajúca",next:"Ďalšie",of:"/"},en:{close:"Close",prev:"Previous",next:"Next",of:"/"},de:{close:"Zumachen",prev:"Vorige",next:"Folgend",of:"/"},es:{close:"Vaer",prev:"Previo",next:"Siguiente",of:"/"},fr:{close:"Fermer",prev:"Précédant",next:"Suivant",of:"/"},it:{close:"Chiudere",prev:"Previo",next:"Veniente",of:"/"},ro:{close:"Închide",prev:"Anterior",next:"Următor",of:"/"},sr:{close:"Blizu",prev:"Prethodna",next:"Sledeći",of:"/"},ru:{close:"закрыть",prev:"Предшествующий",next:"Последующий",of:"/"}},a=["beforeOpen","afterOpen","load","beforeClose","afterClose"];function e(e){for(var t in e=e||{},this.defaults={},n)n.hasOwnProperty(t)&&(this.defaults[t]=(void 0!==e[t]?e:n)[t]);var i;this.defaults.className=n.className+(e.className?" "+e.className:""),this.options=$.extend({},n,e),e.template&&(this.options.template=e.template.toString()),"object"==typeof e.langs?this.langs=$.extend({},s,e.langs):this.langs=s,this.options.lang in this.langs||(this.options.lang="en"),this.isOpen=!1,this.setOnOpenOptions=!1,this.isAjax=e.isAjax||!1,this.isInner=e.isInner||!1,this.events={},this.overlay=null,this.rootElem={},this.window={},this.$doc=$(document),this.$body=$("body"),this.spinnerHtml=e.spinnerHtml||"<span class='pdbox__spinner'></span>",this.html="function"==typeof e.template?e.template(this):($content="<div class='pdbox__window'>\t<div class='pdbox__content'>\t\t<h2 class='pdbox__title'></h2>\t\t<div class='pdbox__desc'>"+((i=this).isAjax?"<div id='snippet--pdbox' class='pdbox__snippet'></div>":"")+"\t\t</div>\t\t<p class='pdbox__pager'>\t\t\t<a href='#' class='pdbox__page pdbox__page--prev' rel=''><span>"+i.langs[i.options.lang].prev+"</span></a>\t\t\t<span class='pdbox__pages'></span>\t\t\t<span class='pdbox__pages-summary'><span class='pdbox__active-page'></span>"+i.langs[i.options.lang].of+"<span class='pdbox__pages-count'></span></span>\t\t\t<a href='#' class='pdbox__page pdbox__page--next' rel=''><span>"+i.langs[i.options.lang].next+"</span></a>\t\t</p>\t\t<p class='pdbox__media-box'></p>\t\t<div class='pdbox__pager--thumbnails'></div>"+i.spinnerHtml+"\t\t<a href='#' class='pdbox__close' title='"+i.langs[i.options.lang].close+"'> "+i.langs[i.options.lang].close+"</a>\t</div></div>",$content),this.$el=null;for(var o,t=0;t<a.length;t++){if("object"==typeof e[o=r(a[t])])for(fn in e[o])e[o].hasOwnProperty(fn)&&"function"==typeof e[o][fn]&&this.addEventListener(a[t],e[o][fn]);else"function"==typeof e[o]&&this.addEventListener(a[t],e[o]);this.options[o]=void 0}this.addEventListener("load",function(){this.rootElem.removeClass("pdbox--loading")}),this.addEventListener("afterOpen",w),this.addEventListener("load",w),function(){var e=document.createElement("style");document.head.appendChild(e);e=e.sheet;e.insertRule(":root { --pdbox-scrollbar-width:"+function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";e=e.offsetWidth;i===e&&(e=t.clientWidth);return document.body.removeChild(t),i-e}()+"px; }",e.cssRules.length)}()}e.prototype.open=function(e,t,i){var o;this.$el=e,this.isOpen?this.removeEventListener("load",this.setOptions):(this.isOpen=!0,this.setOnOpenOptions=!0,this.isBodyOverflowing=(o=document.body.getBoundingClientRect()).left+o.right<window.innerWidth,this.dispatchEvent("beforeOpen",{element:e}),function(e){e.rootElem=$('<div class="pdbox u-out"></div>'),e.rootElem.html(e.html).prependTo(e.$body),e.window.elem=e.rootElem.find(".pdbox__window"),e.window.close=e.window.elem.find(".pdbox__close"),e.window.title=e.window.elem.find(".pdbox__title"),e.window.content=e.window.elem.find(".pdbox__content"),e.window.descWrap=e.window.elem.find(".pdbox__desc"),e.window.desc=e.window.elem.find(".pdbox__snippet"),e.window.desc.length||(e.window.desc=e.window.descWrap);e.window.pager={elem:e.window.elem.find(".pdbox__pager"),pages:e.window.elem.find(".pdbox__pages"),pagesSummary:e.window.elem.find(".pdbox__pages-summary"),activePage:e.window.elem.find(".pdbox__active-page"),pagesCount:e.window.elem.find(".pdbox__pages-count"),prev:e.window.elem.find(".pdbox__page--prev"),next:e.window.elem.find(".pdbox__page--next"),thumbnails:e.window.elem.find(".pdbox__pager--thumbnails")},e.window.media=e.window.elem.find(".pdbox__media-box"),$(document).on("click.pdbox",".pdbox__close, .pdbox__close--alternative",$.proxy(m,e)),e.$doc.on("keyup.pdbox",$.proxy(h,e))}(this),(o=this).overlay=$('<div class="pdbox__overlay"></div>').prependTo(o.rootElem),i||this.rootElem.addClass("pdbox--loading"),this.isInner&&this.rootElem.addClass("pdbox--inner"),this.setOptions(),this.setOnOpenOptions=!1),this.addEventListener("load",this.setOptions),this.window.elem.on("click",$.proxy(m,this)),this.$body.addClass("pdbox-open"),this.window.pager.elem.hide(),this.window.pager.thumbnails.hide(),this.window.media.hide(),this.window.title.hide(),void 0!==e&&void 0!==t&&e.is(":not(.ajax)")&&function(o,e,t){var i=e.data("rel");{var n,s,a,d;i&&(t=$(t),n=$([]),s=t.filter('[data-rel="'+i+'"]'),a="",s.each(function(e){a+=" <a href='"+this.href+"' class='pdbox__page'>"+(e+1)+"</a> "}),o.window.pager.pages.empty().append(a),o.options.imageThumbnails?(d="",s.each(function(e){d+="<li class='pdbox__thumbnail-item'><a href='"+this.href+"' class='pdbox__thumbnail-link'><img class='pdbox__thumbnail' src='"+$(this).data("pdbox-thumbnail")+"'></a></li>"}),o.window.pager.thumbnails.append($('<ul class="pdbox__thumbnail-list"/>')).find(".pdbox__thumbnail-list").append(d),o.window.pager.thumbnails.show(),n=o.window.pager.thumbnails.find("a")):o.window.pager.thumbnails.hide(),$numbers=o.window.pager.pages.find("a"),$numbers.on("click.pdbox open.pdbox",function(e){var t=$(this),i=$numbers.index(this);$numbers.removeClass("pdbox__page--active"),t.addClass("pdbox__page--active"),n.length&&(n.removeClass("pdbox__thumbnail-link--active"),n.eq(i).addClass("pdbox__thumbnail-link--active"),t=o.options.imageThumbnailsAlign,"function"==typeof o.options.imageThumbnailsAlign&&(t=o.options.imageThumbnailsAlign()),"open"===e.type&&"object"==typeof t&&"smooth"===t.behavior&&((t=$.extend({},o.options.imageThumbnailsAlign)).behavior="auto"),n[i].scrollIntoView(t)),o.window.pager.activePage.text(i+1),o.options.infinitePager||(0===i?o.window.pager.prev.addClass("pdbox__page--disabled"):o.window.pager.prev.removeClass("pdbox__page--disabled"),i===$numbers.length-1?o.window.pager.next.addClass("pdbox__page--disabled"):o.window.pager.next.removeClass("pdbox__page--disabled")),function(t,e,i){var o=i.find("img"),n=i.data("pdbox-title")||o.attr("alt")||i.attr("title"),s=i.data("pdbox-description")||o.attr("title")||"",o=i.data("pdbox-srcset");t.rootElem.addClass("pdbox--loading pdbox--media"),t.window.media.show(),n?t.window.title.show().text(n):t.window.title.hide();s?(t.window.descWrap.show(),t.window.desc.html("<p>"+s+"</p>")):t.window.descWrap.hide();var a=i.data("pdbox-video"),s="pdbox__media "+(a?"pdbox__media--video":"pdbox__media--image"),e={src:e};preloader=document.createElement(a?"iframe":"img"),$(preloader).on("load insert",function(e){(!a&&"load"===e.type||a&&"insert"===e.type)&&t.window.media.html(this),"load"===e.type&&t.dispatchEvent("load",{element:i,content:preloader})}),a?(e.allowfullscreen=!0,e.width=t.options.width,e.height=t.options.width/(16/9)):o&&(e.srcset=o,(o=(o=i.data("pdbox-sizes"))||t.options.sizes)&&(e.sizes=o));$(preloader).addClass(s).attr(e),a&&$(preloader).triggerHandler("insert")}(o,this.href,s.eq(i)),e.preventDefault()}).eq(s.index(e)).trigger("open.pdbox"),n.length&&n.on("click.pdbox",function(e){e.preventDefault(),$numbers.eq(n.index(this)).trigger("click.pdbox")}),o.window.pager.prev.on("click.pdbox",function(e){e.preventDefault();e=o.window.pager.pages.find(".pdbox__page--active").prev();0===e.length&&o.options.infinitePager&&(e=o.window.pager.pages.find(".pdbox__page").last()),e.length&&e.trigger("click.pdbox")}),o.window.pager.next.on("click.pdbox",function(e){e.preventDefault();e=o.window.pager.pages.find(".pdbox__page--active").next();0===e.length&&o.options.infinitePager&&(e=o.window.pager.pages.find(".pdbox__page").first()),e.length&&e.trigger("click.pdbox")}),o.$doc.on("keyup.pdbox",$.proxy(c,o)),1<$numbers.length&&(o.window.pager.elem.show(),o.window.pager.pagesCount.text($numbers.length)))}}(this,e,t),this.dispatchEvent("afterOpen",{element:e})},e.prototype.close=function(){var t,e,i;this.isOpen&&(t=this.$el,this.isOpen=!1,this.$el=null,this.removeEventListener("load",this.setOptions),this.rootElem.addClass("pdbox--closing"),this.dispatchEvent("beforeClose",{element:t}),this.window.elem.off(),e=parseInt(getComputedStyle(this.rootElem[0]).getPropertyValue("--pdbox-closing-duration")||0),i=this,setTimeout(function(){var e;(e=i).window.close.off(),e.window.pager.next.off(),e.window.pager.prev.off(),e.window.pager.pages.find("a").off(),e.window.pager.thumbnails.off(),e.overlay.off(),e.$doc.off("keyup.pdbox"),e.rootElem.remove(),i.isInner||i.$body.removeClass("pdbox-open pdbox-open--scrollbar-offset"),i.dispatchEvent("afterClose",{element:t})},e))},e.prototype.content=function(e){if(void 0===e){var t=this.window.elem.clone();return t.find(".ajax-overlay, .ajax-loader").remove(),t.html()}this.window.elem.html(e),this.window.content=this.window.elem.find(".pdbox__content")},e.prototype.setOptions=function(e,t){var i,o,n;if(this.setOnOpenOptions)for($.extend(this.options,this.defaults),i=0;i<a.length;i++)o=r(a[i]),this.options[o]=null;if(this.$el){var s={};for(s.width=this.$el.data("pdboxWidth"),s.className=this.$el.data("pdboxClassName")?this.$el.data("pdboxClassName")+" "+this.defaults.className:this.defaults.className,i=0;i<a.length;i++)n=p(a[i]),s[o=r(a[i])]=this.$el.data(n);$.extend(this.options,s)}e&&t&&$.extend(this.options,e),this.rootElem.removeClass(function(e,t){var t=t.split(" "),i=["pdbox","pdbox--loading","pdbox--media","pdbox--inner"];return t.filter(function(e){return-1===i.indexOf(e)}).join(" ")}).addClass(this.options.className),this.window.content.css({"max-width":this.options.width+"px"})};function d(e){e in this.events||(this.events[e]=[])}e.prototype.addEventListener=function(e,t){d.call(this,e),this.events[e].push(t)},e.prototype.removeEventListener=function(e,t){d.call(this,e),void 0===e?this.events={}:this.events[e]=$.grep(this.events[e],function(e){return void 0!==t&&e!==t})},e.prototype.dispatchEvent=function(e,t){d.call(this,e);for(var i=0;i<this.events[e].length;i++)this.events[e][i].call(this,t);var o=r(e);if(this.options[o])for(var n=this.options[o].split(" "),i=0;i<n.length;i++){var s=l(n[i].trim(),window);null!==s&&s.call(this,t)}};var l=function(e,t){for(var i=e.split("."),o=t,n=0;n<i.length;n++){if(!(i[n]in o))return null;o=o[i[n]]}return o},p=function(e){return"pdboxOn"+e.charAt(0).toUpperCase()+e.slice(1)},r=function(e){return"on"+e.charAt(0).toUpperCase()+e.slice(1)};function h(e){27===e.which&&this.close()}function c(e){37===e.which?this.window.pager.prev.not(".pdbox__page--disabled").trigger("click"):39===e.which&&this.window.pager.next.not(".pdbox__page--disabled").trigger("click"),e.preventDefault()}function w(){var e;this.isBodyOverflowing?this.$body.addClass("pdbox-open--scrollbar-offset"):(e=this).window.elem&&e.window.elem[0].scrollHeight>document.documentElement.clientHeight?this.window.elem.addClass("pdbox__window--scrollbar-offset"):this.window.elem.removeClass("pdbox__window--scrollbar-offset")}function m(e){var t=$(e.target).closest("a");(e.target===this.window.elem[0]||this.window.elem.has(e.target).length&&(t.hasClass("pdbox__close")||t.hasClass("pdbox__close--alternative")))&&(this.close(),e.preventDefault())}return e.prototype.openHtml=function(e,t){var i=t.data("pdbox-title");this.open(t,void 0,!0),this.window.descWrap.show(),this.window.desc.html(e),i?this.window.title.show().text(i):this.window.title.hide(),this.dispatchEvent("load",{element:t,content:e})},e.prototype.openUrl=function(e,t){this.open(t,void 0,!1),$.ajax({url:e,success:$.proxy(function(e){this.window.descWrap.show(),this.window.desc.html(e),this.dispatchEvent("load",{element:t,content:e})},this)})},e}();