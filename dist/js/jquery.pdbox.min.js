/*! jQuery pdBox 1.3.8 | MIT | PeckaDesign, s.r.o, https://github.com/peckadesign/jquery.pdbox */

$.pdBox=function(){function a(a){a=a||{},this.defaults={};for(var c in p)p.hasOwnProperty(c)&&(this.defaults[c]=void 0!==a[c]?a[c]:p[c]);this.defaults.className=p.className+(a.className?" "+a.className:""),this.options=$.extend({},p,a),a.template&&(this.options.template=a.template.toString()),"object"==typeof a.langs?this.langs=$.extend({},q,a.langs):this.langs=q,this.options.lang in this.langs||(this.options.lang="en"),this.isOpen=!1,this.setOnOpenOptions=!1,this.isAjax=a.isAjax||!1,this.isInner=a.isInner||!1,this.events={},this.overlay=null,this.rootElem={},this.window={},this.$doc=$(document),this.$body=$("body"),this.spinnerHtml=a.spinnerHtml||"<span class='pdbox__spinner'></span>",this.html="function"==typeof a.template?a.template(this):b(this),this.$el=null;var d="";for(var e in r){if(d=v(r[e]),"object"==typeof a[d])for(fn in a[d])a[d].hasOwnProperty(fn)&&"function"==typeof a[d][fn]&&this.addEventListener(r[e],a[d][fn]);else"function"==typeof a[d]&&this.addEventListener(r[e],a[d]);this.options[d]=void 0}this.addEventListener("load",function(){this.rootElem.removeClass("pdbox--loading")}),this.addEventListener("afterOpen",i),this.addEventListener("load",i),l()}function b(a){return $content="<div class='pdbox__window'>\t<div class='pdbox__content'>\t\t<h2 class='pdbox__title'></h2>\t\t<div class='pdbox__desc'>"+(a.isAjax?"<div id='snippet--pdbox' class='pdbox__snippet'></div>":"")+"\t\t</div>\t\t<p class='pdbox__pager'>\t\t\t<a href='#' class='pdbox__page pdbox__page--prev' rel=''><span>"+a.langs[a.options.lang].prev+"</span></a>\t\t\t<span class='pdbox__pages'></span>\t\t\t<span class='pdbox__pages-summary'><span class='pdbox__active-page'></span>"+a.langs[a.options.lang].of+"<span class='pdbox__pages-count'></span></span>\t\t\t<a href='#' class='pdbox__page pdbox__page--next' rel=''><span>"+a.langs[a.options.lang].next+"</span></a>\t\t</p>\t\t<p class='pdbox__media-box'></p>\t\t<div class='pdbox__pager--thumbnails'></div>"+a.spinnerHtml+"\t\t<a href='#' class='pdbox__close' title='"+a.langs[a.options.lang].close+"'> "+a.langs[a.options.lang].close+"</a>\t</div></div>",$content}function c(a){a.rootElem=$('<div class="pdbox u-out"></div>'),a.rootElem.html(a.html).prependTo(a.$body),a.window.elem=a.rootElem.find(".pdbox__window"),a.window.close=a.window.elem.find(".pdbox__close"),a.window.title=a.window.elem.find(".pdbox__title"),a.window.content=a.window.elem.find(".pdbox__content"),a.window.descWrap=a.window.elem.find(".pdbox__desc"),a.window.desc=a.window.elem.find(".pdbox__snippet"),a.window.desc.length||(a.window.desc=a.window.descWrap),a.window.pager={elem:a.window.elem.find(".pdbox__pager"),pages:a.window.elem.find(".pdbox__pages"),pagesSummary:a.window.elem.find(".pdbox__pages-summary"),activePage:a.window.elem.find(".pdbox__active-page"),pagesCount:a.window.elem.find(".pdbox__pages-count"),prev:a.window.elem.find(".pdbox__page--prev"),next:a.window.elem.find(".pdbox__page--next"),thumbnails:a.window.elem.find(".pdbox__pager--thumbnails")},a.window.media=a.window.elem.find(".pdbox__media-box"),$(document).on("click.pdbox",".pdbox__close, .pdbox__close--alternative",$.proxy(o,a)),a.$doc.on("keyup.pdbox",$.proxy(g,a))}function d(a){a.window.close.off(),a.window.pager.next.off(),a.window.pager.prev.off(),a.window.pager.pages.find("a").off(),a.window.pager.thumbnails.off(),a.overlay.off(),a.$doc.off("keyup.pdbox"),a.rootElem.remove()}function e(a,b,c){var d=b.data("rel");if(d){var e=$(c),g=$([]),i=e.filter('[data-rel="'+d+'"]'),j="";if(i.each(function(a){j+=" <a href='"+this.href+"' class='pdbox__page'>"+(a+1)+"</a> "}),a.window.pager.pages.empty().append(j),a.options.imageThumbnails){var k="";i.each(function(a){k+="<li class='pdbox__thumbnail-item'><a href='"+this.href+"' class='pdbox__thumbnail-link'><img class='pdbox__thumbnail' src='"+$(this).data("pdbox-thumbnail")+"'></a>"}),a.window.pager.thumbnails.append($('<ul class="pdbox__thumbnail-list"/>')).find(".pdbox__thumbnail-list").append(k),a.window.pager.thumbnails.show(),g=a.window.pager.thumbnails.find("a")}else a.window.pager.thumbnails.hide();$numbers=a.window.pager.pages.find("a"),$numbers.on("click.pdbox",function(b){var c=$(this),d=$numbers.index(this);$numbers.removeClass("pdbox__page--active"),c.addClass("pdbox__page--active"),g.length&&(g.removeClass("pdbox__thumbnail-link--active"),g.eq(d).addClass("pdbox__thumbnail-link--active")),a.window.pager.activePage.text(d+1),a.options.infinitePager||(0===d?a.window.pager.prev.addClass("pdbox__page--disabled"):a.window.pager.prev.removeClass("pdbox__page--disabled"),d===$numbers.length-1?a.window.pager.next.addClass("pdbox__page--disabled"):a.window.pager.next.removeClass("pdbox__page--disabled")),f(a,this.href,i.eq(d)),b.preventDefault()}).eq(i.index(b)).trigger("click.pdbox"),g.length&&g.on("click.pdbox",function(a){a.preventDefault(),$numbers.eq(g.index(this)).trigger("click.pdbox")}),a.window.pager.prev.on("click.pdbox",function(b){b.preventDefault();var c=a.window.pager.pages.find(".pdbox__page--active").prev();0===c.length&&a.options.infinitePager&&(c=a.window.pager.pages.find(".pdbox__page").last()),c.length&&c.trigger("click.pdbox")}),a.window.pager.next.on("click.pdbox",function(b){b.preventDefault();var c=a.window.pager.pages.find(".pdbox__page--active").next();0===c.length&&a.options.infinitePager&&(c=a.window.pager.pages.find(".pdbox__page").first()),c.length&&c.trigger("click.pdbox")}),a.$doc.on("keyup.pdbox",$.proxy(h,a)),$numbers.length>1&&(a.window.pager.elem.show(),a.window.pager.pagesCount.text($numbers.length))}}function f(a,b,c){var d=c.find("img"),e=c.data("pdbox-title")||d.attr("alt")||c.attr("title"),f=c.data("pdbox-description")||d.attr("title")||"",g=c.data("pdbox-srcset");a.rootElem.addClass("pdbox--loading pdbox--media"),a.window.media.show(),e?a.window.title.show().text(e):a.window.title.hide(),f?(a.window.descWrap.show(),a.window.desc.html("<p>"+f+"</p>")):a.window.descWrap.hide();var h=c.data("pdbox-video"),i="pdbox__media "+(h?"pdbox__media--video":"pdbox__media--image"),j={src:b};if(preloader=document.createElement(h?"iframe":"img"),$(preloader).on("load insert",function(b){(!h&&"load"===b.type||h&&"insert"===b.type)&&a.window.media.html(this),"load"===b.type&&a.dispatchEvent("load",{element:c,content:preloader})}),h)j.allowfullscreen=!0,j.width=a.options.width,j.height=a.options.width/(16/9);else if(g){j.srcset=g;var k=c.data("pdbox-sizes");(k||(k=a.options.sizes))&&(j.sizes=k)}$(preloader).addClass(i).attr(j),h&&$(preloader).triggerHandler("insert")}function g(a){27===a.which&&this.close()}function h(a){37===a.which?this.window.pager.prev.not(".pdbox__page--disabled").trigger("click"):39===a.which&&this.window.pager.next.not(".pdbox__page--disabled").trigger("click"),a.preventDefault()}function i(){this.isBodyOverflowing?this.$body.addClass("pdbox-open--scrollbar-offset"):k(this)?this.window.elem.addClass("pdbox__window--scrollbar-offset"):this.window.elem.removeClass("pdbox__window--scrollbar-offset")}function j(){var a=document.body.getBoundingClientRect();return a.left+a.right<window.innerWidth}function k(a){return a.window.elem&&a.window.elem[0].scrollHeight>document.documentElement.clientHeight}function l(){var a=document.createElement("style");document.head.appendChild(a);var b=a.sheet;b.insertRule(":root { --pdbox-scrollbar-width:"+m()+"px; }",b.cssRules.length)}function m(){var a=document.createElement("p");a.style.width="100%",a.style.height="200px";var b=document.createElement("div");b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.visibility="hidden",b.style.width="200px",b.style.height="150px",b.style.overflow="hidden",b.appendChild(a),document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;return c===d&&(d=b.clientWidth),document.body.removeChild(b),c-d}function n(a){a.overlay=$('<div class="pdbox__overlay"></div>').prependTo(a.rootElem)}function o(a){var b=$(a.target).closest("a");(a.target===this.window.elem[0]||this.window.elem.has(a.target).length&&(b.hasClass("pdbox__close")||b.hasClass("pdbox__close--alternative")))&&(this.close(),a.preventDefault())}var p={width:900,className:"",imageThumbnails:!1,infinitePager:!1,lang:$("html").attr("lang")||"cs"},q={cs:{close:"Zavřít",prev:"Předchozí",next:"Další",of:"/"},sk:{close:"Zavrieť",prev:"Predchádzajúca",next:"Ďalšie",of:"/"},en:{close:"Close",prev:"Previous",next:"Next",of:"/"},de:{close:"Zumachen",prev:"Vorige",next:"Folgend",of:"/"},es:{close:"Vaer",prev:"Previo",next:"Siguiente",of:"/"},fr:{close:"Fermer",prev:"Précédant",next:"Suivant",of:"/"},it:{close:"Chiudere",prev:"Previo",next:"Veniente",of:"/"},ru:{close:"закрыть",prev:"Предшествующий",next:"Последующий",of:"/"}},r=["beforeOpen","afterOpen","load","beforeClose","afterClose"];a.prototype.open=function(a,b,d){this.$el=a,this.isOpen?this.removeEventListener("load",this.setOptions):(this.isOpen=!0,this.setOnOpenOptions=!0,this.isBodyOverflowing=j(),this.dispatchEvent("beforeOpen",{element:a}),c(this),n(this),d||this.rootElem.addClass("pdbox--loading"),this.isInner&&this.rootElem.addClass("pdbox--inner"),this.setOptions(),this.setOnOpenOptions=!1),this.addEventListener("load",this.setOptions),this.window.elem.on("click",$.proxy(o,this)),this.$body.addClass("pdbox-open"),this.window.pager.elem.hide(),this.window.pager.thumbnails.hide(),this.window.media.hide(),this.window.title.hide(),void 0!==a&&void 0!==b&&a.is(":not(.ajax)")&&e(this,a,b),this.dispatchEvent("afterOpen",{element:a})},a.prototype.close=function(){if(this.isOpen){var a=this.$el;this.isOpen=!1,this.$el=null,this.removeEventListener("load",this.setOptions),this.rootElem.addClass("pdbox--closing"),this.dispatchEvent("beforeClose",{element:a}),this.window.elem.off();var b=parseInt(getComputedStyle(this.rootElem[0]).getPropertyValue("--pdbox-closing-duration")||0),c=this;setTimeout(function(){d(c),c.isInner||c.$body.removeClass("pdbox-open pdbox-open--scrollbar-offset"),c.dispatchEvent("afterClose",{element:a})},b)}},a.prototype.content=function(a){if(void 0===a){var b=this.window.elem.clone();return b.find(".ajax-overlay, .ajax-loader").remove(),b.html()}this.window.elem.html(a),this.window.content=this.window.elem.find(".pdbox__content")},a.prototype.setOptions=function(a,b){var c,d,e;if(this.setOnOpenOptions){$.extend(this.options,this.defaults);for(c in r)d=v(r[c]),this.options[d]=null}if(this.$el){var f={};f.width=this.$el.data("pdboxWidth"),f.className=this.$el.data("pdboxClassName")?this.$el.data("pdboxClassName")+" "+this.defaults.className:this.defaults.className;for(c in r)e=u(r[c]),d=v(r[c]),f[d]=this.$el.data(e);$.extend(this.options,f)}a&&b&&$.extend(this.options,a),this.rootElem.removeClass(function(a,b){var c=["pdbox","pdbox--loading","pdbox--media","pdbox--inner"];return b.split(" ").filter(function(a){return-1===c.indexOf(a)}).join(" ")}).addClass(this.options.className),this.window.content.css({"max-width":this.options.width+"px"})};var s=function(a){a in this.events||(this.events[a]=[])};a.prototype.addEventListener=function(a,b){s.call(this,a),this.events[a].push(b)},a.prototype.removeEventListener=function(a,b){s.call(this,a),void 0===a?this.events={}:this.events[a]=$.grep(this.events[a],function(a){return void 0!==b&&a!==b})},a.prototype.dispatchEvent=function(a,b){s.call(this,a);for(var c=0;c<this.events[a].length;c++)this.events[a][c].call(this,b);var d=v(a);if(this.options[d]){var e=this.options[d].split(" ");for(c=0;c<e.length;c++){var f=t(e[c].trim(),window);null!==f&&f.call(this,b)}}};var t=function(a,b){for(var c=a.split("."),d=b,e=0;e<c.length;e++){if(!(c[e]in d))return null;d=d[c[e]]}return d},u=function(a){return"pdboxOn"+a.charAt(0).toUpperCase()+a.slice(1)},v=function(a){return"on"+a.charAt(0).toUpperCase()+a.slice(1)};return a.prototype.openHtml=function(a,b){var c=b.data("pdbox-title");this.open(b,void 0,!0),this.window.descWrap.show(),this.window.desc.html(a),c?this.window.title.show().text(c):this.window.title.hide(),this.dispatchEvent("load",{element:b,content:a})},a.prototype.openUrl=function(a,b){this.open(b,void 0,!1),$.ajax({url:a,success:$.proxy(function(a){this.window.descWrap.show(),this.window.desc.html(a),this.dispatchEvent("load",{element:b,content:a})},this)})},a}();