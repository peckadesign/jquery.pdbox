/*! jQuery pdBox 2.0.0 | MIT | PeckaDesign, s.r.o, https://github.com/peckadesign/jquery.pdbox */
!function(e,t){var n,o;"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,n=e.tabbable,o=e.tabbable={},t(o),o.noConflict=function(){return e.tabbable=n,o})}(this,function(e){"use strict";function n(e,t,n){var o=Array.prototype.slice.apply(e.querySelectorAll(c));return t&&f.call(e,c)&&o.unshift(e),o.filter(n)}function l(e,t,n){for(var o=[],i=Array.from(e);i.length;){var a,s,r=i.shift();"SLOT"===r.tagName?(a=l((a=r.assignedElements()).length?a:r.children,!0,n),n.flatten?o.push.apply(o,a):o.push({scope:r,candidates:a})):(f.call(r,c)&&n.filter(r)&&(t||!e.includes(r))&&o.push(r),a=r.shadowRoot||"function"==typeof n.getShadowRoot&&n.getShadowRoot(r),s=!n.shadowRootFilter||n.shadowRootFilter(r),a&&s?(s=l((!0===a?r:a).children,!0,n),n.flatten?o.push.apply(o,s):o.push({scope:r,candidates:s})):i.unshift.apply(i,r.children))}return o}function d(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex}function o(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function i(e){return b(t=e)&&"radio"===t.type&&!function(e){if(!e.name)return 1;function t(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')}var n=e.form||h(e);if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)o=t(window.CSS.escape(e.name));else try{o=t(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),0}var o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(o,e.form);return!o||o===e}(e);var t}function r(e){var t=(e=e.getBoundingClientRect()).width,e=e.height;return 0===t&&0===e}function a(s,e){return!(e.disabled||b(t=e)&&"hidden"===t.type||function(e){var t=s.displayCheck,n=s.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return 1;var o=f.call(e,"details>summary:first-of-type")?e.parentElement:e;if(f.call(o,"details:not([open]) *"))return 1;o=h(e).host,o=(null==o?void 0:o.ownerDocument.contains(o))||e.ownerDocument.contains(e);if(t&&"full"!==t){if("non-zero-area"===t)return r(e)}else{if("function"==typeof n){for(t=e;e;){var i=e.parentElement,a=h(e);if(i&&!i.shadowRoot&&!0===n(i))return r(e);e=e.assignedSlot||(i||a===e.ownerDocument?i:a.host)}e=t}if(o)return!e.getClientRects().length}}(e)||"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var o=t.children.item(n);if("LEGEND"===o.tagName)return f.call(t,"fieldset[disabled] *")||!o.contains(e)}return 1}t=t.parentElement}}(e));var t}function s(e,t){return!(i(t)||d(t)<0||!a(e,t))}function p(e){return e=parseInt(e.getAttribute("tabindex"),10),!!(isNaN(e)||0<=e)}var t=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],c=t.join(","),u="undefined"==typeof Element,f=u?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,h=!u&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},b=function(e){return"INPUT"===e.tagName},v=t.concat("iframe").join(",");e.focusable=function(e,t){return(t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:a.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):n(e,t.includeContainer,a.bind(null,t))},e.isFocusable=function(e,t){if(t=t||{},e)return!1!==f.call(e,v)&&a(t,e);throw new Error("No node provided")},e.isTabbable=function(e,t){if(t=t||{},e)return!1!==f.call(e,c)&&s(t,e);throw new Error("No node provided")},e.tabbable=function(e,t){return function s(e){var r=[],l=[];return e.forEach(function(e,t){var n=!!e.scope,o=n?e.scope:e,i=d(o,n),a=n?s(e.candidates):o;0===i?n?r.push.apply(r,a):r.push(o):l.push({documentOrder:t,tabIndex:i,item:e,isScope:n,content:a})}),l.sort(o).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(r)}((t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:s.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:p}):n(e,t.includeContainer,s.bind(null,t)))},Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){var n,o;"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tabbable")):"function"==typeof define&&define.amd?define(["exports","tabbable"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,n=e.focusTrap,o=e.focusTrap={},t(o,e.tabbable),o.noConflict=function(){return e.focusTrap=n,o})}(this,function(e,g){"use strict";function t(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function x(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?t(Object(i),!0).forEach(function(e){var t,n;t=o,n=i[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function y(e){return setTimeout(e,0)}function _(e,n){var o=-1;return e.every(function(e,t){return!n(e)||(o=t,!1)}),o}function E(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return"function"==typeof e?e.apply(void 0,n):e}function O(e){return e.target.shadowRoot&&"function"==typeof e.composedPath?e.composedPath()[0]:e.target}n=[];var n,C={activateTrap:function(e){0<n.length&&((t=n[n.length-1])!==e&&t.pause());var t=n.indexOf(e);-1!==t&&n.splice(t,1),n.push(e)},deactivateTrap:function(e){e=n.indexOf(e);-1!==e&&n.splice(e,1),0<n.length&&n[n.length-1].unpause()}};e.createFocusTrap=function(e,t){function s(e,t,n){return e&&void 0!==e[t]?e[t]:c[n||t]}function r(e){var t=h("setReturnFocus",e);return t||!1!==t&&e}function a(){if(u.active)C.activateTrap(d),u.delayInitialFocusTimer=c.delayInitialFocus?y(function(){v(o())}):v(o()),p.addEventListener("focusin",i,!0),p.addEventListener("mousedown",n,{capture:!0,passive:!1}),p.addEventListener("touchstart",n,{capture:!0,passive:!1}),p.addEventListener("click",w,{capture:!0,passive:!1}),p.addEventListener("keydown",m,{capture:!0,passive:!1})}function l(){if(u.active)p.removeEventListener("focusin",i,!0),p.removeEventListener("mousedown",n,!0),p.removeEventListener("touchstart",n,!0),p.removeEventListener("click",w,!0),p.removeEventListener("keydown",m,!0)}var d,p=(null==t?void 0:t.document)||document,c=x({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},t),u={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},f=function(n){return u.containerGroups.findIndex(function(e){var t=e.container,e=e.tabbableNodes;return t.contains(n)||e.find(function(e){return e===n})})},h=function(e){var t=c[e];if("function"==typeof t){for(var n=arguments.length,o=new Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t=t.apply(void 0,o)}if(!(t=!0===t?void 0:t)){if(void 0===t||!1===t)return t;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var a=t;if("string"!=typeof t||(a=p.querySelector(t)))return a;throw new Error("`".concat(e,"` as selector refers to no known node"))},o=function(){var e,t=h("initialFocus");if(!1===t)return!1;if(t=void 0===t?0<=f(p.activeElement)?p.activeElement:(e=u.tabbableGroups[0])&&e.firstTabbableNode||h("fallbackFocus"):t)return t;throw new Error("Your focus-trap needs to have at least one focusable element")},b=function(){if(u.containerGroups=u.containers.map(function(e){var t=g.tabbable(e,c.tabbableOptions),o=g.focusable(e,c.tabbableOptions);return{container:e,tabbableNodes:t,focusableNodes:o,firstTabbableNode:0<t.length?t[0]:null,lastTabbableNode:0<t.length?t[t.length-1]:null,nextTabbableNode:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=o.findIndex(function(e){return e===t});if(!(n<0))return e?o.slice(n+1).find(function(e){return g.isTabbable(e,c.tabbableOptions)}):o.slice(0,n).reverse().find(function(e){return g.isTabbable(e,c.tabbableOptions)})}}}),u.tabbableGroups=u.containerGroups.filter(function(e){return 0<e.tabbableNodes.length}),u.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},v=function e(t){var n;!1!==t&&t!==p.activeElement&&(t&&t.focus?(t.focus({preventScroll:!!c.preventScroll}),u.mostRecentlyFocusedNode=t,(n=t).tagName&&"input"===n.tagName.toLowerCase()&&"function"==typeof n.select&&t.select()):e(o()))},n=function(e){var t=O(e);0<=f(t)||(E(c.clickOutsideDeactivates,e)?d.deactivate({returnFocus:c.returnFocusOnDeactivate&&!g.isFocusable(t,c.tabbableOptions)}):E(c.allowOutsideClick,e)||e.preventDefault())},i=function(e){var t=O(e),n=0<=f(t);n||t instanceof Document?n&&(u.mostRecentlyFocusedNode=t):(e.stopImmediatePropagation(),v(u.mostRecentlyFocusedNode||o()))},m=function(e){if(("Escape"===e.key||"Esc"===e.key||27===e.keyCode)&&!1!==E(c.escapeDeactivates,e))return e.preventDefault(),void d.deactivate();var t,n,o,i,a;"Tab"!==e.key&&9!==e.keyCode||(i=O(e=e),b(),a=null,0<u.tabbableGroups.length?(o=0<=(t=f(i))?u.containerGroups[t]:void 0,t<0?a=e.shiftKey?u.tabbableGroups[u.tabbableGroups.length-1].lastTabbableNode:u.tabbableGroups[0].firstTabbableNode:e.shiftKey?0<=(n=(n=_(u.tabbableGroups,function(e){e=e.firstTabbableNode;return i===e}))<0&&(o.container===i||g.isFocusable(i,c.tabbableOptions)&&!g.isTabbable(i,c.tabbableOptions)&&!o.nextTabbableNode(i,!1))?t:n)&&(n=0===n?u.tabbableGroups.length-1:n-1,a=u.tabbableGroups[n].lastTabbableNode):0<=(n=(n=_(u.tabbableGroups,function(e){e=e.lastTabbableNode;return i===e}))<0&&(o.container===i||g.isFocusable(i,c.tabbableOptions)&&!g.isTabbable(i,c.tabbableOptions)&&!o.nextTabbableNode(i))?t:n)&&(o=n===u.tabbableGroups.length-1?0:n+1,a=u.tabbableGroups[o].firstTabbableNode)):a=h("fallbackFocus"),a&&(e.preventDefault(),v(a)))},w=function(e){var t=O(e);0<=f(t)||E(c.clickOutsideDeactivates,e)||E(c.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())};return(d={get active(){return u.active},get paused(){return u.paused},activate:function(e){if(u.active)return this;function t(){i&&b(),a(),o&&o()}var n=s(e,"onActivate"),o=s(e,"onPostActivate"),i=s(e,"checkCanFocusTrap");i||b(),u.active=!0,u.paused=!1,u.nodeFocusedBeforeActivation=p.activeElement,n&&n();return i?i(u.containers.concat()).then(t,t):t(),this},deactivate:function(e){if(!u.active)return this;function t(){y(function(){a&&v(r(u.nodeFocusedBeforeActivation)),o&&o()})}var e=x({onDeactivate:c.onDeactivate,onPostDeactivate:c.onPostDeactivate,checkCanReturnFocus:c.checkCanReturnFocus},e),n=(clearTimeout(u.delayInitialFocusTimer),u.delayInitialFocusTimer=void 0,l(),u.active=!1,u.paused=!1,C.deactivateTrap(d),s(e,"onDeactivate")),o=s(e,"onPostDeactivate"),i=s(e,"checkCanReturnFocus"),a=s(e,"returnFocus","returnFocusOnDeactivate");n&&n();return a&&i?i(r(u.nodeFocusedBeforeActivation)).then(t,t):t(),this},pause:function(){return!u.paused&&u.active&&(u.paused=!0,l()),this},unpause:function(){return u.paused&&u.active&&(u.paused=!1,b(),a()),this},updateContainerElements:function(e){e=[].concat(e).filter(Boolean);return u.containers=e.map(function(e){return"string"==typeof e?p.querySelector(e):e}),u.active&&b(),this}}).updateContainerElements(e),d},Object.defineProperty(e,"__esModule",{value:!0})}),$.pdBox=function(){var i={width:900,className:"",imageThumbnails:!1,imageThumbnailsAlign:{behavior:"smooth",block:"nearest",inline:"center"},overlayPreventClose:!1,infinitePager:!1,lang:$("html").attr("lang")||"cs"},a={cs:{close:"Zavřít",prev:"Předchozí",next:"Další",of:"/"},sk:{close:"Zavrieť",prev:"Predchádzajúca",next:"Ďalšie",of:"/"},en:{close:"Close",prev:"Previous",next:"Next",of:"/"},de:{close:"Zumachen",prev:"Vorige",next:"Folgend",of:"/"},es:{close:"Vaer",prev:"Previo",next:"Siguiente",of:"/"},fr:{close:"Fermer",prev:"Précédant",next:"Suivant",of:"/"},it:{close:"Chiudere",prev:"Previo",next:"Veniente",of:"/"},ro:{close:"Închide",prev:"Anterior",next:"Următor",of:"/"},sr:{close:"Zatvori",prev:"Prethodna",next:"Sledeći",of:"/"},ru:{close:"закрыть",prev:"Предшествующий",next:"Последующий",of:"/"},bg:{close:"Затвори",prev:"Предишен",next:"Следващия",of:"/"}},s=["beforeOpen","afterOpen","load","beforeClose","afterClose"];function e(e){for(var t in e=e||{},this.defaults={},i)i.hasOwnProperty(t)&&(this.defaults[t]=(void 0!==e[t]?e:i)[t]);this.defaults.className=i.className+(e.className?" "+e.className:""),this.options=$.extend({},i,e),e.template&&(this.options.template=e.template.toString()),"object"==typeof e.langs?this.langs=$.extend({},a,e.langs):this.langs=a,this.options.lang in this.langs||(this.options.lang="en"),this.isOpen=!1,this.setOnOpenOptions=!1,this.isAjax=e.isAjax||!1,this.isInner=e.isInner||!1,this.events={},this.overlay=null,this.rootElem={},this.window={},this.$doc=$(document),this.$body=$("body"),this.spinnerHtml=e.spinnerHtml||"<span class='pdbox__spinner'></span>",this.html="function"==typeof e.template?e.template(this):$content="<div class='pdbox__window'>\t<div class='pdbox__content'>\t\t<h2 class='pdbox__title'></h2>\t\t<div class='pdbox__desc'>"+((o=this).isAjax?"<div id='snippet--pdbox' class='pdbox__snippet'></div>":"")+"\t\t</div>\t\t<p class='pdbox__pager'>\t\t\t<a href='#' class='pdbox__page pdbox__page--prev' rel=''><span>"+o.langs[o.options.lang].prev+"</span></a>\t\t\t<span class='pdbox__pages'></span>\t\t\t<span class='pdbox__pages-summary'><span class='pdbox__active-page'></span>"+o.langs[o.options.lang].of+"<span class='pdbox__pages-count'></span></span>\t\t\t<a href='#' class='pdbox__page pdbox__page--next' rel=''><span>"+o.langs[o.options.lang].next+"</span></a>\t\t</p>\t\t<p class='pdbox__media-box'></p>\t\t<div class='pdbox__pager--thumbnails'></div>"+o.spinnerHtml+"\t\t<a href='#' class='pdbox__close' title='"+o.langs[o.options.lang].close+"'> "+o.langs[o.options.lang].close+"</a>\t</div></div>",this.trap=null,this.$el=null;for(var n,o,t=0;t<s.length;t++){if("object"==typeof e[n=p(s[t])])for(fn in e[n])e[n].hasOwnProperty(fn)&&"function"==typeof e[n][fn]&&this.addEventListener(s[t],e[n][fn]);else"function"==typeof e[n]&&this.addEventListener(s[t],e[n]);this.options[n]=void 0}this.addEventListener("load",function(){this.rootElem.removeClass("pdbox--loading"),this.trap=focusTrap.createFocusTrap(".pdbox",{escapeDeactivates:!1,clickOutsideDeactivates:!1}),this.trap.activate()}),this.addEventListener("afterOpen",f),this.addEventListener("load",f),this.addEventListener("afterClose",function(){this.trap.deactivate()}),o=document.createElement("style"),document.head.appendChild(o),(o=o.sheet).insertRule(":root { --pdbox-scrollbar-width:"+function(){var e=document.createElement("p"),t=(e.style.width="100%",e.style.height="200px",document.createElement("div")),n=(t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t),e.offsetWidth),e=(t.style.overflow="scroll",e.offsetWidth);n===e&&(e=t.clientWidth);return document.body.removeChild(t),n-e}()+"px; }",o.cssRules.length)}e.prototype.open=function(e,t,n){var l,o,d,p,i,a;this.$el=e,this.isOpen?this.removeEventListener("load",this.setOptions):(this.isOpen=!0,this.setOnOpenOptions=!0,this.isBodyOverflowing=(o=document.body.getBoundingClientRect()).left+o.right<window.innerWidth,this.dispatchEvent("beforeOpen",{element:e}),(o=this).rootElem=$('<div class="pdbox u-out"></div>'),o.rootElem.html(o.html).prependTo(o.$body),o.window.elem=o.rootElem.find(".pdbox__window"),o.window.close=o.window.elem.find(".pdbox__close"),o.window.title=o.window.elem.find(".pdbox__title"),o.window.content=o.window.elem.find(".pdbox__content"),o.window.descWrap=o.window.elem.find(".pdbox__desc"),o.window.desc=o.window.elem.find(".pdbox__snippet"),o.window.desc.length||(o.window.desc=o.window.descWrap),o.window.pager={elem:o.window.elem.find(".pdbox__pager"),pages:o.window.elem.find(".pdbox__pages"),pagesSummary:o.window.elem.find(".pdbox__pages-summary"),activePage:o.window.elem.find(".pdbox__active-page"),pagesCount:o.window.elem.find(".pdbox__pages-count"),prev:o.window.elem.find(".pdbox__page--prev"),next:o.window.elem.find(".pdbox__page--next"),thumbnails:o.window.elem.find(".pdbox__pager--thumbnails")},o.window.media=o.window.elem.find(".pdbox__media-box"),$(document).on("click.pdbox",".pdbox__close, .pdbox__close--alternative",$.proxy(h,o)),o.$doc.on("keyup.pdbox",$.proxy(c,o)),(o=this).overlay=$('<div class="pdbox__overlay"></div>').prependTo(o.rootElem),n||this.rootElem.addClass("pdbox--loading"),this.isInner&&this.rootElem.addClass("pdbox--inner"),this.setOptions(),this.setOnOpenOptions=!1),this.addEventListener("load",this.setOptions),this.window.elem.on("click",$.proxy(h,this)),this.$body.addClass("pdbox-open"),this.window.pager.elem.hide(),this.window.pager.thumbnails.hide(),this.window.media.hide(),this.window.title.hide(),void 0!==e&&void 0!==t&&e.is(":not(.ajax)")&&(l=this,o=t,(t=(n=e).data("rel"))&&(o=$(o),d=$([]),p=o.filter('[data-rel="'+t+'"]'),i="",p.each(function(e){i+=" <a href='"+this.href+"' class='pdbox__page'>"+(e+1)+"</a> "}),l.window.pager.pages.empty().append(i),l.options.imageThumbnails?(a="",p.each(function(e){var t=$(this),n=t.data("pdbox-title")||t.find("img").attr("alt")||t.attr("title")||"";a+="<li class='pdbox__thumbnail-item'><a href='"+this.href+"' class='pdbox__thumbnail-link'><img class='pdbox__thumbnail' src='"+t.data("pdbox-thumbnail")+"' alt='"+n+"'></a></li>"}),l.window.pager.thumbnails.append($('<ul class="pdbox__thumbnail-list"/>')).find(".pdbox__thumbnail-list").append(a),l.window.pager.thumbnails.show(),d=l.window.pager.thumbnails.find("a")):l.window.pager.thumbnails.hide(),($numbers=l.window.pager.pages.find("a")).on("click.pdbox open.pdbox",function(e){var t=$(this),n=$numbers.index(this),o=($numbers.removeClass("pdbox__page--active"),t.addClass("pdbox__page--active"),d.length&&(d.removeClass("pdbox__thumbnail-link--active"),d.eq(n).addClass("pdbox__thumbnail-link--active"),t=l.options.imageThumbnailsAlign,"function"==typeof l.options.imageThumbnailsAlign&&(t=l.options.imageThumbnailsAlign()),"open"===e.type&&"object"==typeof t&&"smooth"===t.behavior&&((t=$.extend({},l.options.imageThumbnailsAlign)).behavior="auto"),d[n].scrollIntoView(t)),l.window.pager.activePage.text(n+1),l.options.infinitePager||(0===n?l.window.pager.prev.addClass("pdbox__page--disabled"):l.window.pager.prev.removeClass("pdbox__page--disabled"),n===$numbers.length-1?l.window.pager.next.addClass("pdbox__page--disabled"):l.window.pager.next.removeClass("pdbox__page--disabled")),l),t=this.href,i=p.eq(n),n=i.find("img"),a=i.data("pdbox-title")||n.attr("alt")||i.attr("title"),n=i.data("pdbox-description")||n.attr("title")||"",s=i.data("pdbox-srcset"),r=(o.rootElem.addClass("pdbox--loading pdbox--media"),o.window.media.show(),a?o.window.title.show().text(a):o.window.title.hide(),n?(o.window.descWrap.show(),o.window.desc.html("<p>"+n+"</p>")):o.window.descWrap.hide(),i.data("pdbox-video")),n="pdbox__media "+(r?"pdbox__media--video":"pdbox__media--image"),t={src:t};preloader=document.createElement(r?"iframe":"img"),$(preloader).on("load insert",function(e){(!r&&"load"===e.type||r&&"insert"===e.type)&&o.window.media.html(this),"load"===e.type&&o.dispatchEvent("load",{element:i,content:preloader})}),!r&&a&&(t.alt=a),r?(t.allowfullscreen=!0,t.width=o.options.width,t.height=o.options.width/(16/9)):s&&(t.srcset=s,(a=(a=i.data("pdbox-sizes"))||o.options.sizes)&&(t.sizes=a)),$(preloader).addClass(n).attr(t),r&&$(preloader).triggerHandler("insert"),e.preventDefault()}).eq(p.index(n)).trigger("open.pdbox"),d.length&&d.on("click.pdbox",function(e){e.preventDefault(),$numbers.eq(d.index(this)).trigger("click.pdbox")}),l.window.pager.prev.on("click.pdbox",function(e){e.preventDefault();e=l.window.pager.pages.find(".pdbox__page--active").prev();(e=0===e.length&&l.options.infinitePager?l.window.pager.pages.find(".pdbox__page").last():e).length&&e.trigger("click.pdbox")}),l.window.pager.next.on("click.pdbox",function(e){e.preventDefault();e=l.window.pager.pages.find(".pdbox__page--active").next();(e=0===e.length&&l.options.infinitePager?l.window.pager.pages.find(".pdbox__page").first():e).length&&e.trigger("click.pdbox")}),l.$doc.on("keyup.pdbox",$.proxy(u,l)),1<$numbers.length&&(l.window.pager.elem.show(),l.window.pager.pagesCount.text($numbers.length)))),this.dispatchEvent("afterOpen",{element:e})},e.prototype.close=function(t){var n,e,o;this.isOpen&&(n=this.$el,this.isOpen=!1,this.$el=null,this.removeEventListener("load",this.setOptions),this.rootElem.addClass("pdbox--closing"),this.dispatchEvent("beforeClose",{element:n,event:t}),this.window.elem.off(),e=parseInt(getComputedStyle(this.rootElem[0]).getPropertyValue("--pdbox-closing-duration")||0),o=this,setTimeout(function(){var e;(e=o).window.close.off(),e.window.pager.next.off(),e.window.pager.prev.off(),e.window.pager.pages.find("a").off(),e.window.pager.thumbnails.off(),e.overlay.off(),e.$doc.off("keyup.pdbox"),e.rootElem.remove(),o.isInner||o.$body.removeClass("pdbox-open pdbox-open--scrollbar-offset"),o.dispatchEvent("afterClose",{element:n,event:t})},e))},e.prototype.content=function(e){var t;if(void 0===e)return(t=this.window.elem.clone()).find(".ajax-overlay, .ajax-loader").remove(),t.html();this.window.elem.html(e),this.window.content=this.window.elem.find(".pdbox__content")},e.prototype.setOptions=function(e,t){var n,o,i;if(this.setOnOpenOptions)for($.extend(this.options,this.defaults),n=0;n<s.length;n++)o=p(s[n]),this.options[o]=null;if(this.$el){var a={};for(a.width=this.$el.data("pdboxWidth"),a.className=this.$el.data("pdboxClassName")?this.$el.data("pdboxClassName")+" "+this.defaults.className:this.defaults.className,a.overlayPreventClose=this.$el.data("pdboxOverlayPreventClose")?this.$el.data("pdboxOverlayPreventClose"):this.defaults.overlayPreventClose,n=0;n<s.length;n++)i=d(s[n]),a[o=p(s[n])]=this.$el.data(i);$.extend(this.options,a)}e&&t&&$.extend(this.options,e),this.rootElem.removeClass(function(e,t){var t=t.split(" "),n=["pdbox","pdbox--loading","pdbox--media","pdbox--inner"];return t.filter(function(e){return-1===n.indexOf(e)}).join(" ")}).addClass(this.options.className),this.window.content.css({"max-width":this.options.width+"px"})};function r(e){e in this.events||(this.events[e]=[])}e.prototype.addEventListener=function(e,t){r.call(this,e),this.events[e].push(t)},e.prototype.removeEventListener=function(e,t){r.call(this,e),void 0===e?this.events={}:this.events[e]=$.grep(this.events[e],function(e){return void 0!==t&&e!==t})},e.prototype.dispatchEvent=function(e,t){r.call(this,e);for(var n=0;n<this.events[e].length;n++)this.events[e][n].call(this,t);var o=p(e);if(this.options[o])for(var i=this.options[o].split(" "),n=0;n<i.length;n++){var a=l(i[n].trim(),window);null!==a&&a.call(this,t)}};var l=function(e,t){for(var n=e.split("."),o=t,i=0;i<n.length;i++){if(!(n[i]in o))return null;o=o[n[i]]}return o},d=function(e){return"pdboxOn"+e.charAt(0).toUpperCase()+e.slice(1)},p=function(e){return"on"+e.charAt(0).toUpperCase()+e.slice(1)};function c(e){27===e.which&&this.close(e)}function u(e){37===e.which?this.window.pager.prev.not(".pdbox__page--disabled").trigger("click"):39===e.which&&this.window.pager.next.not(".pdbox__page--disabled").trigger("click"),e.preventDefault()}function f(){var e;this.isBodyOverflowing?this.$body.addClass("pdbox-open--scrollbar-offset"):(e=this).window.elem&&e.window.elem[0].scrollHeight>document.documentElement.clientHeight?this.window.elem.addClass("pdbox__window--scrollbar-offset"):this.window.elem.removeClass("pdbox__window--scrollbar-offset")}function h(e){var t=$(e.target).closest("a");(!this.options.overlayPreventClose&&e.target===this.window.elem[0]||this.window.elem.has(e.target).length&&(t.hasClass("pdbox__close")||t.hasClass("pdbox__close--alternative")))&&(this.close(e),e.preventDefault())}return e.prototype.openHtml=function(e,t){var n=t.data("pdbox-title");this.open(t,void 0,!0),this.window.descWrap.show(),this.window.desc.html(e),n?this.window.title.show().text(n):this.window.title.hide(),this.dispatchEvent("load",{element:t,content:e})},e.prototype.openUrl=function(e,t){this.open(t,void 0,!1),$.ajax({url:e,success:$.proxy(function(e){this.window.descWrap.show(),this.window.desc.html(e),this.dispatchEvent("load",{element:t,content:e})},this)})},e}();